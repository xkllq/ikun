(self["webpackChunkhmtt81"]=self["webpackChunkhmtt81"]||[]).push([[468],{88468:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("van-nav-bar",{attrs:{title:"搜索中心","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),r("van-search",{attrs:{shape:"round","show-action":"",placeholder:"请输入搜索关键词"},on:{search:e.onSearch,input:function(t){return e.search(e.value)}},scopedSlots:e._u([{key:"action",fn:function(){return[r("div",{on:{click:e.onSearch}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.value?e._e():r("div",[r("van-cell-group",[r("p",{staticStyle:{padding:"15px"}},[e._v("历史记录")]),e._l(e.historyArr,(function(e,t){return r("van-cell",{key:t,attrs:{to:"/search/result?key="+e,title:e}})}))],2)],1),r("div",e._l(e.colorList,(function(t,n){return r("van-cell",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],key:n,attrs:{icon:"search",to:"/search/result?key="+e.adviceList[n]}},[r("span",{domProps:{innerHTML:e._s(t)}})])})),1)],1)},a=[],u=r(16198),c=(r(78975),r(26699),r(32023),r(21249),r(24603),r(28450),r(74916),r(88386),r(39714),r(15306),r(76684)),i=(r(38862),"history"),o=function(e){localStorage.setItem(i,JSON.stringify(e))},s=function(){return JSON.parse(localStorage.getItem(i))},l={name:"searchIndex",data:function(){return{value:"",adviceList:[],historyArr:s()||[]}},methods:{onSearch:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,c.OF)({q:e.value});case 2:e.value&&(e.historyArr.includes(e.value)||(e.historyArr.unshift(e.value),o(e.historyArr))),e.$router.push({path:"/search/result",query:{key:e.value}}),e.value="";case 5:case"end":return t.stop()}}),t)})))()},search:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=5;break}return r.next=3,(0,c.Zt)({q:e});case 3:n=r.sent,n.data.data.options[0]&&(t.adviceList=n.data.data.options);case 5:case"end":return r.stop()}}),r)})))()}},computed:{colorList:function(){var e=this;return this.adviceList.map((function(t){var r=new RegExp(e.value,"ig");return t.replace(r,'<span style="color:red">'.concat(e.value,"</span>"))}))}}},v=l,h=r(1001),d=(0,h.Z)(v,n,a,!1,null,"46494875",null),f=d.exports},84964:function(e,t,r){var n=r(5112),a=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[a]=!1,"/./"[e](t)}catch(n){}}return!1}},3929:function(e,t,r){var n=r(17854),a=r(47850),u=n.TypeError;e.exports=function(e){if(a(e))throw u("The method doesn't accept regular expressions");return e}},26699:function(e,t,r){"use strict";var n=r(82109),a=r(41318).includes,u=r(51223);n({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),u("includes")},32023:function(e,t,r){"use strict";var n=r(82109),a=r(1702),u=r(3929),c=r(84488),i=r(41340),o=r(84964),s=a("".indexOf);n({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~s(i(c(this)),i(u(e)),arguments.length>1?arguments[1]:void 0)}})}}]);