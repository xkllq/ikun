"use strict";(self["webpackChunkhmtt81"]=self["webpackChunkhmtt81"]||[]).push([[450],{6450:function(t,a,e){e.r(a),e.d(a,{default:function(){return x}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"detail"},[e("van-nav-bar",{attrs:{title:"文章详情","left-arrow":"","left-text":"返回"},on:{"click-left":function(a){return t.$router.back()}}}),e("div",{staticClass:"articleContent"},[e("h1",[t._v(t._s(t.info.title))]),e("div",{staticClass:"author"},[e("van-image",{attrs:{fit:"cover",round:"",src:t.info.aut_photo}}),e("div",{staticClass:"authorInfo"},[e("div",[e("p",[t._v(t._s(t.info.aut_name))]),e("p",[t._v(t._s(t._f("relvTime")(t.info.pubdate)))])]),e("van-button",{attrs:{round:"",type:"info"}},[t._v("+关注")])],1)],1),e("div",{staticClass:"articleTxt",domProps:{innerHTML:t._s(t.info.content)}}),e("van-divider",[t._v("end")]),e("div",{staticClass:"buttons"},[e("van-button",{attrs:{round:"",type:"info"}},[t._v("👍点赞")]),e("van-button",{attrs:{round:"",type:"info"}},[t._v("🗑️删除")])],1),e("van-divider",[t._v("评论区")])],1),e("comments-list")],1)},n=[],i=e(6684),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"commentsList"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.list,(function(a,s){return e("van-cell",{key:s},[e("div",{staticClass:"comments"},[e("van-image",{attrs:{fit:"cover",round:"",src:a.aut_photo}}),e("div",{staticClass:"commentsInfo"},[e("div",{staticClass:"authorName",staticStyle:{color:"#5174a3"}},[t._v(t._s(a.aut_name))]),e("div",{staticClass:"content"},[t._v(t._s(a.content))]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",[t._v(t._s(t._f("relvTime")(a.pubdate)))]),e("span",{staticClass:"timeComment",on:{click:function(e){return t.replyComment(a)}}},[t._v(" 回复("+t._s(a.reply_count)+") ")])])]),e("van-icon",{ref:"icon",refInFor:!0,attrs:{name:"star-o"},on:{click:function(e){return t.commentLiking(a.com_id)}}})],1)])})),1),e("van-action-sheet",{attrs:{title:"发表回复"},model:{value:t.showReply,callback:function(a){t.showReply=a},expression:"showReply"}},[t.showReply?e("reply-comment",{attrs:{replyObj:t.current}}):t._e()],1),e("div",{staticClass:"updateComments"},[e("van-field",{attrs:{placeholder:"请输入评论内容"},model:{value:t.commentValue,callback:function(a){t.commentValue=a},expression:"commentValue"}}),e("van-button",{attrs:{type:"info"},on:{click:t.confirmComment}},[t._v("发布")])],1)],1)},l=[],c=(e(6888),e(8256)),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"commentsList"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("div",{staticClass:"comments",staticStyle:{padding:"20px 20px 0 20px"}},[e("van-image",{attrs:{fit:"cover",round:"",src:t.replyObj.aut_photo}}),e("div",{staticClass:"commentsInfo"},[e("div",{staticClass:"authorName",staticStyle:{color:"#5174a3"}},[t._v(t._s(t.replyObj.aut_name))]),e("div",{staticClass:"content"},[t._v(t._s(t.replyObj.content))]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticClass:"timeComment"},[t._v(t._s(t._f("relvTime")(t.replyObj.pubdate)))])])])],1),e("van-divider",[t._v("回复列表")]),t._l(t.replyComments,(function(a,s){return e("div",{key:s,staticClass:"comments2"},[e("van-image",{attrs:{fit:"cover",round:"",src:a.aut_photo}}),e("div",{staticClass:"commentsInfo"},[e("div",{staticClass:"authorName",staticStyle:{color:"#5174a3"}},[t._v(t._s(a.aut_name))]),e("div",{staticClass:"content"},[t._v(t._s(a.content))]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticClass:"timeComment"},[t._v(t._s(t._f("relvTime")(a.pubdate)))])])])],1)})),e("div",{staticClass:"updateComments"},[e("van-field",{attrs:{placeholder:"请输入评论内容"},model:{value:t.commentValue,callback:function(a){t.commentValue=a},expression:"commentValue"}}),e("van-button",{attrs:{type:"info"},on:{click:t.confirmComment}},[t._v("发布")])],1)],2)],1)},m=[],d={name:"replyComment",props:["replyObj"],data(){return{replyComments:[],loading:!1,finished:!1,commentValue:"",offset:null}},methods:{async onLoad(){const t=await(0,i.fN)({type:"c",source:this.replyObj.com_id,offset:this.offset});this.replyComments.push(...t.data.data.results),this.offset=t.data.data.last_id,this.loading=!1,t.data.data.end_id===t.data.data.last_id&&(this.finished=!0)},async confirmComment(){if(""===this.commentValue)c.Z.fail("发点东西吧!");else{const t=await(0,i.Mi)({target:this.replyObj.com_id,content:this.commentValue,art_id:this.$route.params.id});c.Z.success("评论成功!"),this.commentValue="",this.replyComments.unshift(t.data.data.new_obj),this.replyObj.reply_count++}}}},u=d,f=e(1001),v=(0,f.Z)(u,r,m,!1,null,"1dcb94dc",null),p=v.exports,h={name:"commentsList",components:{ReplyComment:p},data(){return{loading:!1,finished:!1,offset:null,list:[],commentValue:"",showReply:!1,current:{}}},methods:{async onLoad(){const t=await(0,i.fN)({type:"a",source:this.$route.params.id,offset:this.offset});this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,this.loading=!1,t.data.data.last_id===t.data.data.end_id&&(this.finished=!0)},async confirmComment(){if(""===this.commentValue)c.Z.fail("发点东西吧!");else{const t=await(0,i.Mi)({target:this.$route.params.id,content:this.commentValue});c.Z.success("评论成功!"),this.commentValue="",this.list.unshift(t.data.data.new_obj)}},replyComment(t){this.showReply=!0,this.current=t},async commentLiking(t){const a=await(0,i.Q1)({target:t});console.log(a)}}},_=h,y=(0,f.Z)(_,o,l,!1,null,"59dde45f",null),C=y.exports,b={name:"articleDetail",components:{CommentsList:C},data(){return{info:{}}},async created(){const t=await(0,i.qK)(this.$route.params.id);this.info=t.data.data}},g=b,k=(0,f.Z)(g,s,n,!1,null,"8fa5b08e",null),x=k.exports}}]);