"use strict";(self["webpackChunkhmtt81"]=self["webpackChunkhmtt81"]||[]).push([[468],{8468:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"搜索中心","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),a("van-search",{attrs:{shape:"round","show-action":"",placeholder:"请输入搜索关键词"},on:{search:t.onSearch,input:function(e){return t.search(t.value)}},scopedSlots:t._u([{key:"action",fn:function(){return[a("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t.value?t._e():a("div",[a("van-cell-group",[a("p",{staticStyle:{padding:"15px"}},[t._v("历史记录")]),t._l(t.historyArr,(function(t,e){return a("van-cell",{key:e,attrs:{to:"/search/result?key="+t,title:t}})}))],2)],1),a("div",t._l(t.colorList,(function(e,r){return a("van-cell",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],key:r,attrs:{icon:"search",to:"/search/result?key="+t.adviceList[r]}},[a("span",{domProps:{innerHTML:t._s(e)}})])})),1)],1)},s=[],n=a(6684);const i="history",o=t=>{localStorage.setItem(i,JSON.stringify(t))},l=()=>JSON.parse(localStorage.getItem(i));var c={name:"searchIndex",data(){return{value:"",adviceList:[],historyArr:l()||[]}},methods:{async onSearch(){await(0,n.OF)({q:this.value}),this.value&&(this.historyArr.includes(this.value)||(this.historyArr.unshift(this.value),o(this.historyArr))),this.$router.push({path:"/search/result",query:{key:this.value}}),this.value=""},async search(t){if(t){const e=await(0,n.Zt)({q:t});e.data.data.options[0]&&(this.adviceList=e.data.data.options)}}},computed:{colorList(){return this.adviceList.map((t=>{const e=new RegExp(this.value,"ig");return t.replace(e,`<span style="color:red">${this.value}</span>`)}))}}},u=c,h=a(1001),v=(0,h.Z)(u,r,s,!1,null,"46494875",null),d=v.exports}}]);