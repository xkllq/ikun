(self["webpackChunkhmtt81"]=self["webpackChunkhmtt81"]||[]).push([[450],{66450:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Z}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail"},[n("van-nav-bar",{attrs:{title:"文章详情","left-arrow":"","left-text":"返回"},on:{"click-left":function(e){return t.$router.back()}}}),n("div",{staticClass:"articleContent"},[n("h1",[t._v(t._s(t.info.title))]),n("div",{staticClass:"author"},[n("van-image",{attrs:{fit:"cover",round:"",src:t.info.aut_photo}}),n("div",{staticClass:"authorInfo"},[n("div",[n("p",[t._v(t._s(t.info.aut_name))]),n("p",[t._v(t._s(t._f("relvTime")(t.info.pubdate)))])]),n("van-button",{attrs:{round:"",type:"info"}},[t._v("+关注")])],1)],1),n("div",{staticClass:"articleTxt",domProps:{innerHTML:t._s(t.info.content)}}),n("van-divider",[t._v("end")]),n("div",{staticClass:"buttons"},[n("van-button",{attrs:{round:"",type:"info"}},[t._v("👍点赞")]),n("van-button",{attrs:{round:"",type:"info"}},[t._v("🗑️删除")])],1),n("van-divider",[t._v("评论区")])],1),n("comments-list")],1)},r=[],s=n(16198),i=(n(78975),n(76684)),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"commentsList"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("van-cell",{key:a},[n("div",{staticClass:"comments"},[n("van-image",{attrs:{fit:"cover",round:"",src:e.aut_photo}}),n("div",{staticClass:"commentsInfo"},[n("div",{staticClass:"authorName",staticStyle:{color:"#5174a3"}},[t._v(t._s(e.aut_name))]),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",[t._v(t._s(t._f("relvTime")(e.pubdate)))]),n("span",{staticClass:"timeComment",on:{click:function(n){return t.replyComment(e)}}},[t._v(" 回复("+t._s(e.reply_count)+") ")])])]),n("van-icon",{ref:"icon",refInFor:!0,attrs:{name:"star-o"},on:{click:function(n){return t.commentLiking(e.com_id)}}})],1)])})),1),n("van-action-sheet",{attrs:{title:"发表回复"},model:{value:t.showReply,callback:function(e){t.showReply=e},expression:"showReply"}},[t.showReply?n("reply-comment",{attrs:{replyObj:t.current}}):t._e()],1),n("div",{staticClass:"updateComments"},[n("van-field",{attrs:{placeholder:"请输入评论内容"},model:{value:t.commentValue,callback:function(e){t.commentValue=e},expression:"commentValue"}}),n("van-button",{attrs:{type:"info"},on:{click:t.confirmComment}},[t._v("发布")])],1)],1)},c=[],l=(n(6888),n(58256)),u=n(68932),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"commentsList"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("div",{staticClass:"comments",staticStyle:{padding:"20px 20px 0 20px"}},[n("van-image",{attrs:{fit:"cover",round:"",src:t.replyObj.aut_photo}}),n("div",{staticClass:"commentsInfo"},[n("div",{staticClass:"authorName",staticStyle:{color:"#5174a3"}},[t._v(t._s(t.replyObj.aut_name))]),n("div",{staticClass:"content"},[t._v(t._s(t.replyObj.content))]),n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticClass:"timeComment"},[t._v(t._s(t._f("relvTime")(t.replyObj.pubdate)))])])])],1),n("van-divider",[t._v("回复列表")]),t._l(t.replyComments,(function(e,a){return n("div",{key:a,staticClass:"comments2"},[n("van-image",{attrs:{fit:"cover",round:"",src:e.aut_photo}}),n("div",{staticClass:"commentsInfo"},[n("div",{staticClass:"authorName",staticStyle:{color:"#5174a3"}},[t._v(t._s(e.aut_name))]),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticClass:"timeComment"},[t._v(t._s(t._f("relvTime")(e.pubdate)))])])])],1)})),n("div",{staticClass:"updateComments"},[n("van-field",{attrs:{placeholder:"请输入评论内容"},model:{value:t.commentValue,callback:function(e){t.commentValue=e},expression:"commentValue"}}),n("van-button",{attrs:{type:"info"},on:{click:t.confirmComment}},[t._v("发布")])],1)],2)],1)},d=[],f={name:"replyComment",props:["replyObj"],data:function(){return{replyComments:[],loading:!1,finished:!1,commentValue:"",offset:null}},methods:{onLoad:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.fN)({type:"c",source:t.replyObj.com_id,offset:t.offset});case 2:a=e.sent,(n=t.replyComments).push.apply(n,(0,u.Z)(a.data.data.results)),t.offset=a.data.data.last_id,t.loading=!1,a.data.data.end_id===a.data.data.last_id&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},confirmComment:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.commentValue){e.next=4;break}l.Z.fail("发点东西吧!"),e.next=11;break;case 4:return e.next=6,(0,i.Mi)({target:t.replyObj.com_id,content:t.commentValue,art_id:t.$route.params.id});case 6:n=e.sent,l.Z.success("评论成功!"),t.commentValue="",t.replyComments.unshift(n.data.data.new_obj),t.replyObj.reply_count++;case 11:case"end":return e.stop()}}),e)})))()}}},v=f,p=n(1001),_=(0,p.Z)(v,m,d,!1,null,"1dcb94dc",null),h=_.exports,y={name:"commentsList",components:{ReplyComment:h},data:function(){return{loading:!1,finished:!1,offset:null,list:[],commentValue:"",showReply:!1,current:{}}},methods:{onLoad:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.fN)({type:"a",source:t.$route.params.id,offset:t.offset});case 2:a=e.sent,(n=t.list).push.apply(n,(0,u.Z)(a.data.data.results)),t.offset=a.data.data.last_id,t.loading=!1,a.data.data.last_id===a.data.data.end_id&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},confirmComment:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.commentValue){e.next=4;break}l.Z.fail("发点东西吧!"),e.next=10;break;case 4:return e.next=6,(0,i.Mi)({target:t.$route.params.id,content:t.commentValue});case 6:n=e.sent,l.Z.success("评论成功!"),t.commentValue="",t.list.unshift(n.data.data.new_obj);case 10:case"end":return e.stop()}}),e)})))()},replyComment:function(t){this.showReply=!0,this.current=t},commentLiking:function(t){return(0,s.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Q1)({target:t});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})))()}}},C=y,b=(0,p.Z)(C,o,c,!1,null,"59dde45f",null),g=b.exports,x={name:"articleDetail",components:{CommentsList:g},data:function(){return{info:{}}},created:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.qK)(t.$route.params.id);case 2:n=e.sent,t.info=n.data.data;case 4:case"end":return e.stop()}}),e)})))()}},w=x,k=(0,p.Z)(w,a,r,!1,null,"8fa5b08e",null),Z=k.exports},91038:function(t,e,n){var a=n(82109),r=n(48457),s=n(17072),i=!s((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:i},{from:r})},23748:function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}n.d(e,{Z:function(){return a}})},68932:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var a=n(23748);function r(t){if(Array.isArray(t))return(0,a.Z)(t)}n(82526),n(41817),n(41539),n(32165),n(78783),n(33948),n(91038);function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=n(48936);n(21703);function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||s(t)||(0,i.Z)(t)||o()}},48936:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});n(47042),n(41539),n(68309),n(91038),n(78783),n(74916),n(77601);var a=n(23748);function r(t,e){if(t){if("string"===typeof t)return(0,a.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.Z)(t,e):void 0}}}}]);